# Changelog

| Date | Change |
|------|--------|
| 2026-02-24 | **Agent Swarm** — Orchestrate external coding agents (Claude Code, Codex, Gemini CLI) as a one-person dev team. Everything controlled through conversation. `SwarmManager` (`core/swarm.py`) spawns agents in isolated git worktrees on feature branches, launches them in persistent tmux sessions with knowledge-enriched prompts, monitors PR creation and CI status, handles mid-task redirection via `tmux send-keys`, and auto-stops on timeout. 4 new tools: `swarm_spawn` (create agent with auto-profile selection), `swarm_status` (check agent status with tmux/PR/CI info), `swarm_redirect` (inject new instructions mid-task), `swarm_stop` (kill agent, preserve worktree). Config: `swarm:` section with profiles, concurrency limits, done criteria. DB persistence for restart survival. Gateway event broadcasting (AGENT_SPAWNED/COMPLETED/FAILED/REDIRECTED/STOPPED). New `swarm-orchestration` skill |
| 2026-02-24 | **Browser file upload** — Two new tools for uploading files and images through the browser. `browser_upload_file` sets files directly on `<input type="file">` elements by index (drills into wrappers to find nested file inputs). `browser_file_chooser` handles buttons/areas that open a native file dialog — pre-registers a `filechooser` event listener, clicks the trigger, intercepts the dialog, and sets files. Both verify file existence, accept absolute paths, and support multiple files. Added to vision model allowed set + action parser + cheat sheet. System prompt includes file upload protocol with decision logic (visible file input → `browser_upload_file`, upload button/drop zone → `browser_file_chooser`) |
| 2026-02-24 | **EKO DOM tree port** — Replaced CSS-selector-based element identification with EKO's full DOM tree traversal system. Recursive DOM walk including iframes and shadow DOM, comprehensive interactivity detection (ARIA roles, event listeners, cursor styling, contenteditable, draggable), `isTopElement()` via `elementFromPoint()` to exclude elements behind modals, colored bounding box overlays (12 cycling colors) with index labels, pseudo-HTML output format (`[15]:<button class="primary">Submit</button>`), combined `takeScreenshotWithElements()` for index consistency, `getXPathTree()` for element identification, `create_area_map()` for bounding rect export, `getElementEventListeners()` for `on*` handler detection. Added `browser_press_key`/`browser_type_text`/`browser_select_option` to vision model tool cheat sheet + allowed set + action parser. Fallback to legacy method if DOM tree injection fails |
| 2026-02-24 | **Goal persistence** — Fixed browser agent losing track of the user's task after a few tool calls (e.g., creating Notes instead of Articles on Substack). Current goal now anchored in system prompt (`CURRENT TASK:` in runtime_context), forwarded to browser bridge via `set_task_context` JSON-RPC, and injected into vision model prompt. New `goal_persistence` protocol in browser section explicitly prevents UI confusion (Note vs Article, Quick Post vs New Post). Task completion criteria strengthened: clicking a button is not completion, must verify with screenshot. New `PUBLISH VERIFICATION` protocol: handle confirmation dialogs, verify content is actually live before reporting success |
| 2026-02-24 | **Agent Swarm doc** — New `docs/25-AGENT-SWARM.md` describing how EloPhanto orchestrates CLI coding agents (Claude Code, Codex, Gemini CLI) as a one-person dev team. Two-tier context architecture, tmux process management, git worktrees for isolation, automated monitoring, mid-task redirection, multi-model code review, self-improving prompts, proactive work discovery |
| 2026-02-24 | **Browser post-click wait** — Fixed publish/save/submit buttons getting stuck in loading state. After every click, the browser bridge now waits up to 3s for network idle (was 500ms). Screenshot capture also waits for network idle instead of a fixed 500ms race. System prompt updated with ASYNC BUTTONS guidance so the LLM doesn't re-click loading buttons |
| 2026-02-24 | **Browser rich text editor fix** — Fixed content corruption and deletion when editing pages with rich text editors (Substack/Slate, Medium/ProseMirror, etc.). The browser bridge was directly setting `textContent` on contenteditable elements, bypassing the editor's internal state and causing duplication or data loss. Now detects contenteditable elements and uses `document.execCommand('insertText')` with proper select-all, which goes through the browser's editing pipeline and keeps editor state in sync. Regular inputs/textareas unchanged |
| 2026-02-24 | **Cross-channel forwarding fix** — Fixed Telegram messages not appearing in CLI (and vice versa) after `/clear` or gateway restart. Clients were only subscribed to the unified session broadcast when they sent a chat message, so after session deletion they lost their subscription. Now auto-subscribes all clients on connection, and `/clear` re-subscribes all connected clients to the new session |
| 2026-02-23 | **Vault auto-backup** — Vault now automatically backs up before every write. `_save()` copies `vault.enc` to `vault.enc.bak` before overwriting. `Vault.create()` backs up both `vault.salt` and `vault.enc` before re-initialization, preventing accidental data loss. New `elophanto vault restore` CLI command restores from the most recent backup. Protects credentials, TOTP secrets, wallet keys, and email config |
| 2026-02-23 | **`/clear` session + memory wipe** — `/clear` now actually works in unified session mode. Previously it only reset the local CLI session ID while the gateway kept returning the same conversation. Now it deletes the session from the database AND wipes all task memories so the agent starts completely fresh. New `SessionManager.delete()` and `MemoryManager.clear_all()` methods, gateway `clear` command handler |
| 2026-02-23 | **TOTP authenticator** — Own 2FA authenticator (like Google Authenticator). 4 tools: `totp_enroll` (store Base32 secrets from service setup pages), `totp_generate` (generate 6-digit codes with TTL awareness), `totp_list` (list enrolled services), `totp_delete` (remove secrets). Secrets encrypted in vault, never exposed to LLM. Verification priority system in system prompt (email > TOTP > SMS > push). SMS verification handled conversationally. 33 tests |
| 2026-02-23 | **Background inbox monitoring** — Agent can monitor its own email inbox in the background and push notifications to all connected channels (CLI, Telegram, Discord, Slack) when new emails arrive. Controlled via conversation: "monitor your inbox" starts it, "stop monitoring" stops it. Silent first poll (seeds seen IDs, no notification flood), seen ID persistence across restarts, configurable poll interval (default 5 min). New `email_monitor` tool with start/stop/status actions, `core/email_monitor.py` polling loop, cross-channel notification display in all 4 adapters. 30 tests |
| 2026-02-23 | **Prompt injection defense** — Multi-layer guard against indirect prompt injection attacks via websites, emails, and documents. System prompt trust hierarchy teaches the LLM to treat external content as data. Tool output wrapping marks external results as untrusted. Pattern scanner detects common injection signatures (instruction overrides, role switches, exfiltration attempts, delimiter attacks) and flags them. Gateway input sanitization closes filename injection vectors. New `core/injection_guard.py` module, 35 tests |
| 2026-02-23 | **Unified cross-channel sessions** — All channels (CLI, Telegram, Discord, Slack) now share one conversation by default (`gateway.unified_sessions: true`). Chat from Telegram, see it in CLI, and vice versa. Cross-channel message forwarding shows what was said on other channels. Responses broadcast to all connected channels. Set `unified_sessions: false` for per-channel isolation |
| 2026-02-23 | **Autonomous background goal execution** — Goals now execute checkpoint-by-checkpoint in the background without waiting for user messages. `GoalRunner` class (`core/goal_runner.py`) uses `asyncio.create_task()` per checkpoint via `agent.run()`. Safety limits: 2h total time, $5 cost budget, LLM call cap. Conversation history isolated per checkpoint. Progress events broadcast to all channels (CLI, Telegram, Discord, Slack). User message auto-pauses goal. Auto-resume on agent restart. 12 new tests |
| 2026-02-23 | **Ctrl+C request cancellation** — Pressing Ctrl+C during agent processing now cancels the current request and returns to the prompt instead of killing the terminal. Gateway spawns chat handling as cancellable tasks, CLI sends cancel command on interrupt. Also added `/stop` command. Double Ctrl+C within 1 second force-exits (safety valve). Goal lifecycle events displayed in CLI (started, checkpoint complete, completed, paused, resumed) |
| 2026-02-22 | **Response speed fix** — Eliminated 25-40 second delay on every response caused by post-task housekeeping (identity reflection, task memory, dataset collection) blocking the reply. All post-task work now runs as fire-and-forget background tasks via `asyncio.create_task()`. Embedding detection moved to non-blocking startup. Response time dropped from 30+ seconds to ~4 seconds |
| 2026-02-22 | **Self-learning dataset builder** — Opt-in only (`self_learning.enabled: false` by default). Agent-side data collection pipeline for training. Captures task interactions, sanitizes locally (14 secret patterns, PII, browser data), enriches with training signals (user sentiment, denial/error detection, turn count), buffers in local SQLite, uploads in batches to elophanto.com collection API. Auto-registration via census fingerprint, key recovery on conflict. Server-side: collect endpoint, daily cron pushes to HuggingFace Datasets as JSONL. Collects both successes and failures for DPO/RLHF training. Only collects interactions with tool use (no greetings/chat). 42 tests |
| 2026-02-22 | **MCP integration** — Native MCP client support: connect to any MCP server and its tools appear alongside built-in tools. Dual transport (stdio + Streamable HTTP), vault-referenced secrets, per-server permissions. Agent self-management via `mcp_manage` tool (install SDK, add/remove/test servers through conversation). `elophanto mcp` CLI commands (list, add, remove, test). Init wizard step 8 with presets (filesystem, GitHub, Brave Search). Auto-install SDK on startup. System prompt integration. Welcome panel shows `mcp (N)` with connected server count |
| 2026-02-21 | **Agent Census** — Anonymous startup heartbeat for ecosystem statistics. SHA-256 machine fingerprint (survives reinstall), fire-and-forget with 3s timeout, zero PII. Payload: agent_id + version + platform + python version. `core/census.py` module, integrated in `Agent.initialize()`, 15 tests |
| 2026-02-21 | **Hosted platform spec** — Hybrid distribution: Tauri desktop app (free, local-first) + Fly.io cloud instances (pro, always-on) at elophanto.com. Per-user container isolation, Supabase auth, Stripe billing, shared web dashboard, wake-on-request for hibernated instances, data portability between local and cloud |
| 2026-02-21 | **EloPhantoHub security P0 implemented** — Content security policy with 16 blocked patterns + 5 warning patterns enforced at skill load time (`core/skills.py`), SHA-256 checksum verification on hub install (`core/hub.py`), skill revocation detection + quarantine to `_revoked/`, runtime safety guidance in system prompt (`core/planner.py`), skill origin tagging (source/tier/warnings in XML), enhanced `installed.json` with backward compat, 24 security tests |
| 2026-02-20 | **EloPhantoHub supply chain security spec** — 7-layer defense-in-depth design for skill marketplace security: publisher verification with tier system (New -> Verified -> Trusted -> Official), automated CI scanning (malicious patterns, prompt injection, obfuscation), human review for new publishers, SHA-256 integrity checksums, content security policy (blocked/warning patterns enforced at load time), runtime protection (permission system, skill origin tagging), incident response with revocation broadcast |
| 2026-02-20 | **Agent email** — Own email inbox with dual provider support: AgentMail (cloud API, zero config) or SMTP/IMAP (your own server). 6 tools (email_create_inbox, email_send, email_list, email_read, email_reply, email_search), email-agent skill with verification flow patterns, identity integration (inbox stored in beliefs), audit logging via email_log table. Chat-based setup |
| 2026-02-19 | **Crypto payments** — Agent's own wallet on Base with dual provider support: local self-custody wallet (default, zero config, eth-account) and Coinbase AgentKit (optional, managed custody, gasless, DEX swaps). 7 payment tools, spending limits ($100/txn, $500/day, $5K/month), full audit trail, preview-before-execute protocol, chat-based setup |
| 2026-02-19 | **Evolving identity** — IdentityManager discovers identity on first run via LLM, evolves personality/values/capabilities through task reflection, maintains a living `knowledge/self/nature.md` document, tracks credential accounts in beliefs. 3 new tools, 45 new tests |
| 2026-02-19 | **Autonomous goal loop** — GoalManager decomposes complex goals into ordered checkpoints, persists progress across sessions, summarizes context to stay within token limits, self-evaluates and revises plans. 3 new tools, goals skill, 61 new tests |
| 2026-02-19 | **Document & media analysis** — PDF, DOCX, XLSX, PPTX, EPUB, image extraction with OCR (rapidocr), RAG collections for large documents, 3 new tools, Telegram file/photo intake |
| 2026-02-19 | Fix `/stats`, `/clear`, `/help` commands in gateway CLI mode |
| 2026-02-19 | Add EloPhanto logo assets |
| 2026-02-18 | Initial commit — EloPhanto v0.1.0 (foundation, knowledge, permissions, browser, self-dev, vault, scheduling, Telegram, skills, gateway, channels, EloPhantoHub) |
